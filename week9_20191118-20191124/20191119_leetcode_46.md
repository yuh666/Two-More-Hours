```java
class Solution {
    public List<List<Integer>> permute(int[] nums) {
        if (nums == null || nums.length == 0) {
            return Collections.emptyList();
        }
        if (nums.length == 1) {
            return Collections.singletonList(Collections.singletonList(nums[0]));
        }
        List<List<Integer>> result = new ArrayList<>();
        boolean[] used = new boolean[nums.length];
        execute(result, used, nums, new LinkedList<>());
        return result;
    }

  	/**
  	 * 回溯 + 状态重置
  	 * 参考：https://leetcode-cn.com/problems/permutations/solution/hui-su-suan-fa-python-dai-ma-java-dai-ma-by-liweiw/
  	 */
    private void execute(List<List<Integer>> result, boolean[] used, int[] nums, LinkedList<Integer> currentRes) {
        if (currentRes.size() == nums.length) {
            result.add((List<Integer>) currentRes.clone());
            return;
        }
        for (int i = 0; i < used.length; i++) {
            if (used[i]) {
                continue;
            }
            currentRes.addLast(nums[i]);
            used[i] = true;
            execute(result, used, nums, currentRes);
            currentRes.pollLast();
            used[i] = false;
        }
    }
}
```

