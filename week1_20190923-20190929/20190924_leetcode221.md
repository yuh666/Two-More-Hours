``` java
package leetcode;

public class Solution221 {

    public int maximalSquare(char[][] matrix) {
        int maxSide = 0;
        for (int i = 0; i < matrix.length && matrix.length - i > maxSide; i++) {
            for (int j = 0; j < matrix[i].length && matrix[i].length - j > maxSide; j++) {
                if (matrix[i][j] == 0)
                    continue;
                int tempSide = 1;
                while (isAllOne(matrix, i, j, tempSide)) {
                    tempSide++;
                }
                tempSide--;
                maxSide = maxSide > tempSide ? maxSide : tempSide;
            }
        }
        return maxSide * maxSide;
    }

    /**
     * 已（fromx, fromy）为中心，检查边长为side所在的行和列是否均为1。
     * （0，0）（1，0）（2，0）（3，0）
     * （0，1）（1，1）（2，1）（3，1）
     * （0，2）（1，2）（2，2）（3，2）
     *
     * @param matrix
     * @param fromx
     * @param fromy
     * @param side
     * @return 是否均为1
     */
    private boolean isAllOne(char[][] matrix, int fromx, int fromy, int side) {
        if (fromx + side > matrix.length)
            return false;
        for (int x = fromx; x < fromx + side; x++) {
            char[] height = matrix[x];
            if (fromy + side > height.length)
                return false;
            if (height[fromy + side - 1] == '0')
                return false;
            if (x != fromx + side - 1)
                continue;
            for (int y = fromy; y < fromy + side - 1; y++)
                if (height[y] == '0')
                    return false;
        }
        return true;
    }
}
```