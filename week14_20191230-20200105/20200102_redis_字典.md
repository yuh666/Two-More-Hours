## 字典

![image-20200101115037847](https://note.youdao.com/yws/public/resource/4762addbbb207565dafe6a1264ea04a1/xmlnote/2C24DE4DD6F34E8D8821F04A7D95CA46/8995)

1. 字典(dict)
   - type:类型特定函数
   - privdata:私有数据
   - ht[2]:哈希表  ht[0]:存储数据  当需要rehash时使用ht[1]:当rehash完成之后再交换0和1
   - trehashidx:rehash索引,不进行rehash是为-1
2. 哈希表(dictht)
   - table:哈希表数组
   - size:数组长度
   - sizemask:数组长度掩码=数组长度-1
   - used:哈表表已有节点的数量
3. 哈希表节点
   - key:键
   - value:值
   - next:下一个dictEntry构成链表结构
4. 哈希算法
   - hash=dict->type->hashFunction(key) 通过hash函数计算key对应的hash值
   - index=hash&dict->hx[x].sizemask 同构hash值得到字典表的数组下标为hx[0]或者hx[1],在求hash表数组对应的index 如果index下存储dictEntry字典键值对则添加到链表头部