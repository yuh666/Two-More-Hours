    
# 问题描述:
   - 按权重随机选择:https://leetcode-cn.com/problems/random-pick-with-weight
    
# 思路:    
    public class Question528 {

    /**
     * 权重随机选择思路:    1,2,2,4,4,4,4
     * 比如w数组未  1,2,4 前后两个数相加构建新的数组即 1,3,7   1: 1   3:(2,3) 4:(4,5,6,7)
     */
    class Solution2 {


        private int[] sums;

        private Random random = new Random();

        public Solution2(int[] w) {
            sums = new int[w.length];
            int sum = 0;
            for (int i = 0; i < w.length; i++) {
                sum += w[i];
                sums[i] = sum;
            }
        }

        public int pickIndex() {
            int randomValue = random.nextInt(sums[sums.length - 1]) + 1;
            int index = binarySearch(randomValue);
            System.out.println("随机值:" + randomValue + ",下标:" + index);
            return index;
        }

        /**
         * 二分查找:根据值在原数组中的下标
         *
         * @param value
         * @return
         */
        private int binarySearch(int value) {
            int leftIndex = 0;
            int rightIndex = sums.length - 1;

            while (leftIndex < rightIndex) {
                int midIndex = ((rightIndex - leftIndex) >> 1) + leftIndex;
                int midValue = sums[midIndex];
                if (midValue == value) {
                    return midIndex;
                }
                if (midValue < value) {
                    // 当前值大于左边
                    leftIndex = midIndex + 1;
                } else {
                    rightIndex = midIndex;
                }

            }
            return leftIndex;
        }
    }

    @Test
    public void test2() {
        int[] w = {1, 2, 4};
        Solution2 solution = new Solution2(w);
        for (int i = 0; i < 10; i++) {
            solution.pickIndex();
        }
    }
    }
